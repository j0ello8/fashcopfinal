(self.webpackChunk=self.webpackChunk||[]).push([[386],{509:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r,i,a,o=n(268);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var d=function(t){return new Date(t.getTime()-6e4*t.getTimezoneOffset()).toISOString().slice(0,-1)};const p={name:"TaskForm",apollo:{task:{query:(0,o.ZP)(r||(r=c(["\n        query fetchTask($id: ID!) {\n          task(id: $id) {\n            id\n            title\n            description\n            completed_at\n            due_at\n          }\n        }\n      "]))),variables:function(){return{id:this.$route.params.task}},update:function(t){return this.form=u(u({},t.task),{},{due_at:d(new Date(t.task.due_at)),completed_at:d(new Date(t.task.completed_at))}),t.task},skip:function(){return"new"==this.$route.params.task}}},data:function(){return{form:{title:"",description:"",due_at:"",completed_at:""}}},methods:{handleSubmit:function(){var t=this;if("new"==this.$route.params.task){var e=this.form,n=e.title,r=e.description,s=e.due_at;this.$apollo.mutate({mutation:(0,o.ZP)(i||(i=c(["\n              mutation createTask(\n                $title: String!\n                $description: String\n                $due_at: DateTimeUtc\n              ) {\n                createTask(\n                  title: $title\n                  description: $description\n                  due_at: $due_at\n                ) {\n                  description\n                  due_at\n                  title\n                }\n              }\n            "]))),variables:{title:n,description:r,due_at:new Date(s).toISOString()}}).then((function(e){alert("Added "+e.data.createTask.title),t.$router.push({path:"/"})}))}else{var u=this.form,l=u.title,d=u.description,p=u.due_at;this.$apollo.mutate({mutation:(0,o.ZP)(a||(a=c(["\n              mutation updateTask(\n                $id: ID!\n                $title: String!\n                $description: String\n                $due_at: DateTimeUtc\n                $completed_at: DateTimeUtc = null\n              ) {\n                updateTask(\n                  id: $id\n                  title: $title\n                  description: $description\n                  due_at: $due_at\n                  completed_at: $completed_at\n                ) {\n                  description\n                  due_at\n                  title\n                }\n              }\n            "]))),variables:{id:this.$route.params.task,title:l,description:d,due_at:new Date(p).toISOString()}}).then((function(e){alert("Saved "+e.data.updateTask.title),t.$router.push({path:"/"})}))}}}};const m=(0,n(900).Z)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[n("div",{},[n("label",{attrs:{for:""}},[t._v(" Title ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"input",attrs:{name:"title",required:""},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}})]),t._v(" "),n("div",{},[n("label",{attrs:{for:""}},[t._v(" Due at ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.due_at,expression:"form.due_at"}],staticClass:"input",attrs:{type:"datetime-local"},domProps:{value:t.form.due_at},on:{input:function(e){e.target.composing||t.$set(t.form,"due_at",e.target.value)}}})]),t._v(" "),n("div",{},[n("label",{attrs:{for:""}},[t._v("Description")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.description,expression:"form.description"}],staticClass:"input",attrs:{name:"description",rows:"3",cols:"33",required:""},domProps:{value:t.form.description},on:{input:function(e){e.target.composing||t.$set(t.form,"description",e.target.value)}}})]),t._v(" "),t._m(0)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{},[e("input",{staticClass:"button",attrs:{type:"submit",value:"Save"}})])}],!1,null,null,null).exports}}]);